<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category</title>
    <!-- Why here no static? -->
    <script src="static/js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>

</head>
<body>
    <h1>Category id: <span id="category_id"></span></h1>
    <script id="category-template" type="text/x-handlebars-template">
        <ul>
            {{#each ads}}
            <li>
                <h2>{{title}}</h2>
                <p>{{description}}</p>
                <img src="https://wiki-ads.onrender.com/{{images.[0]}}">
                <p>{{cost}}</p>
            </li>
            {{/each}}
        </ul>
    </script>
    <script>
        //access to url params
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');
        document.querySelector('#category_id').textContent = id;
        getAdsFromCategory(id)
        .then(ads=>{
            // handlebars
            let templateSource = document.getElementById("category-template").innerHTML;
            let template = Handlebars.compile(templateSource);
            console.log(ads)
            let data = {
                ads: ads
            }
            let html = template(data );
            document.body.innerHTML += html;
        });
        
    </script>
    
</body>
</html>